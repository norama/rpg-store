---
import Tile from 'components/Tile'
import MainLayout from 'layouts/MainLayout.astro'
import TileLayout from 'layouts/TileLayout.astro'

import fetchCount from 'api/server/fetchCount'

const count = await fetchCount()
---

<style>
  .content {
    display: flex;
    flex-wrap: wrap;
  }
</style>

<MainLayout pageTitle="RPG Store">
  <h1 slot="header">RPG Store: {count}</h1>
  <div slot="content">
    <div class="content">
      {
        [...Array(count).keys()].map(() => (
          <TileLayout>
            <Tile client:only="solid-js" />
          </TileLayout>
        ))
      }
    </div>
  </div>
</MainLayout>
